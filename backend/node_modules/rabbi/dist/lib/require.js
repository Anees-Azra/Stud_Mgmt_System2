"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.requireDirectory = void 0;
const requireAll = require('require-all');
const path_1 = require("path");
const stack = require('callsite');
function capitalizeFirstLetter(string) {
    return string.charAt(0).toUpperCase() + string.slice(1);
}
function getCallerDirectory() {
    let site = stack().filter(function (site) {
        return !site.getFunctionName();
    })[0];
    let parts = site.getFileName().split('/');
    parts.pop();
    return parts.join('/');
}
function requireDirectory(dirname, options = {}) {
    if (dirname.match(/^\//)) {
        // requiring root file
        // do not change dirname
    }
    else if (dirname.match(/^\./)) {
        // requiring relative to current file
        dirname = (0, path_1.join)(getCallerDirectory(), dirname);
    }
    else {
        // requiring directory from root of process
        dirname = (0, path_1.join)(process.cwd(), dirname);
    }
    const filter = options.filter || /(.+)\.ts$/;
    const map = options.map || function (name, path) {
        return name.split('_').map(p => {
            return capitalizeFirstLetter(p);
        })
            .join('');
    };
    return requireAll({ dirname, filter, map });
}
exports.requireDirectory = requireDirectory;
//# sourceMappingURL=require.js.map